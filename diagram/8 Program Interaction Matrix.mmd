graph TB
    subgraph "Core Programs"
        VP[Vault Program<br/>ğŸ¦<br/>Manages Collateral]
        PP[Position Program<br/>ğŸ“Š<br/>Tracks Positions]
        TP[Token Program<br/>ğŸª™<br/>Mints SOLÂ²]
        FP[Funding Program<br/>ğŸ’°<br/>Applies Rates]
        LP[Liquidation Program<br/>âš ï¸<br/>Risk Management]
    end
    
    subgraph "External Dependencies"
        Pyth[Pyth Oracle<br/>ğŸ”®<br/>Price Feeds]
        SPL[SPL Token<br/>ğŸ“¦<br/>Standard Token]
        Sys[System Program<br/>ğŸ”§<br/>Solana Runtime]
    end
    
    VP -->|CPI: lock_collateral| PP
    VP -->|CPI: unlock_collateral| PP
    PP -->|CPI: mint_tokens| TP
    PP -->|CPI: burn_tokens| TP
    PP -->|Read: get_price| Pyth
    FP -->|CPI: update_position| PP
    FP -->|Read: get_price| Pyth
    LP -->|CPI: close_position| PP
    LP -->|CPI: transfer_collateral| VP
    LP -->|Read: get_price| Pyth
    
    TP -->|Uses| SPL
    VP -->|Uses| SPL
    PP -->|Uses| Sys
    VP -->|Uses| Sys
    
    style VP fill:#e1f5ff
    style PP fill:#fff4e1
    style TP fill:#f0e1ff
    style FP fill:#e1ffe1
    style LP fill:#ffe1e1
    style Pyth fill:#ffe1f5